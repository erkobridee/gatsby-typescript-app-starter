(window.webpackJsonp=window.webpackJsonp||[]).push([[7],{247:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(256),c=a(55),s=a(59),i=a(44),u=a.n(i),l=(a(87),a(68)),p=a.n(l),d=(a(17),a(21)),m=function(e){var t=e.offset,a=e.previousLength,n=e.length,r=e.totalCount;return Object(d.f)(t)&&Object(d.f)(a)&&Object(d.d)(n)&&Object(d.d)(r)?n>0&&n<r-1:!(!Object(d.d)(n)||!Object(d.d)(r)||!Object(d.d)(t)&&!Object(d.d)(a))&&(n>0&&(t||(a||0))+n<r-1)},f=function(e){var t=e.countPerPage,a=e.previousTotalCount,n=e.offset,r=e.page;return n||r?e:Object(d.d)(a)&&Object(d.f)(n)&&Object(d.f)(r)?(e.page=Math.floor(a/t),e):Object.assign({},e,{page:0})},h=(a(89),a(10),a(270)),g=a(272),v=a(279),b=a(33),E=(a(24),a(2),function(){var e=p()(u.a.mark(function e(t){var a;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new FileReader,e.abrupt("return",new Promise(function(e){a.addEventListener("load",function t(){a.removeEventListener("load",t),e(a.result)},!1),a.readAsDataURL(t)}));case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}());function y(e,t){void 0===t&&(t={});var a=e.status,n=e.headers;return{get statusCode(){return a},get headers(){return n},get body(){return t}}}function N(){return(N=p()(u.a.mark(function e(t){var a,n,r,o,c,s,i,l,p,d,m,f,N,O,w,j,_,k,x,P,C,M,R;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(w in a=t.parameters,n=t.authorization,r=t.method,o=void 0===r?b.e.GET:r,c=t.contentType,s=void 0===c?b.d.JSON:c,i=t.protocol,l=void 0===i?b.f.HTTPS:i,p=t.host,d=t.api,m=t.urlPath,f=t.variables,N=void 0===f?{}:f,t.noCache&&(a=Object.assign({},a,{_:Math.random()})),O=function(){var e=d?h.join(d,m):m;return p?g.format({slashes:!0,protocol:l,host:p,pathname:e}):e}(),N)N.hasOwnProperty(w)&&(O=O.replace("{"+w+"}",N[w]));if(!a){e.next=21;break}e.t0=o,e.next=e.t0===b.e.GET?10:12;break;case 10:return O+="?"+v.stringify(a),e.abrupt("break",21);case 12:e.t1=s,e.next=e.t1===b.d.JSON?15:e.t1===b.d.FORM?17:20;break;case 15:return j=JSON.stringify(a),e.abrupt("break",20);case 17:for(_ in j=new FormData,a)a.hasOwnProperty(_)&&j.append(_,a[_]);return e.abrupt("break",20);case 20:return e.abrupt("break",21);case 21:return k={Accept:s,"Content-Type":s},n&&(k.Authorization=n),e.prev=23,e.next=26,fetch(O,{method:o,headers:k,body:j});case 26:if((x=e.sent).ok){e.next=29;break}throw x;case 29:if(P={},s!==b.d.IMAGE){e.next=40;break}return e.next=33,x.blob();case 33:return C=e.sent,e.next=36,E(C);case 36:M=e.sent,P=M,e.next=48;break;case 40:return e.prev=40,e.next=43,x.json();case 43:P=e.sent,e.next=48;break;case 46:e.prev=46,e.t2=e.catch(40);case 48:return e.abrupt("return",y(x,P));case 51:return e.prev=51,e.t3=e.catch(23),e.prev=53,e.next=56,e.t3.json();case 56:R=e.sent,e.next=62;break;case 59:e.prev=59,e.t4=e.catch(53),R=e.t3;case 62:throw y(e.t3,R);case 63:case"end":return e.stop()}},e,null,[[23,51],[40,46],[53,59]])}))).apply(this,arguments)}var O,w=function(e){return N.apply(this,arguments)},j=(a(282),a(283)),_=a.n(j),k=function(){function e(e){this.props=e}return e.prototype.toJSON=function(){return{id:this.id,title:this.title,url:this.url}},_()(e,[{key:"__innerprops__",get:function(){return this.props}},{key:"id",get:function(){return this.props.id}},{key:"title",get:function(){return this.props.title}},{key:"url",get:function(){return"http://lorempixel.com/600/400/?_="+this.props.id+"}"}}]),e}(),x=function(){var e=p()(u.a.mark(function e(t){var a,n,r,o,c,s,i,l,p,m,f,h,g,v,E,y,N;return u.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t&&(n=t.offset,r=t.page,o=void 0===r?0:r,c=t.countPerPage,s=void 0===c?b.b:c,i=Object(d.d)(n)?n:o*s,a={_start:i,_limit:s}),e.prev=1,e.next=4,w({host:"jsonplaceholder.typicode.com",urlPath:"photos",parameters:a});case 4:return l=e.sent,p=l.statusCode,m=l.headers,f=l.body,h=m.get("x-total-count")||0,g=Number(h),v=f.map(function(e){return new k(e)}),e.abrupt("return",{status:b.a.SUCCESS,statusCode:p,data:v,totalCount:g});case 12:throw e.prev=12,e.t0=e.catch(1),E=e.t0,y=E.statusCode,N=E.body,{status:b.a.ERROR,statusCode:y,body:N};case 17:case"end":return e.stop()}},e,null,[[1,12]])}));return function(t){return e.apply(this,arguments)}}(),P=a(66),C=function(e){return function(){var t=p()(u.a.mark(function t(a){var n,r,o,c,s,i,l,p,d,h;return u.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=f(e||{countPerPage:50}),r=n.offset,o=n.page,c=n.countPerPage,a({type:P.a.FETCHING}),t.prev=2,t.next=5,x({offset:r,page:o,countPerPage:c});case 5:s=t.sent,i=s.data,l=s.totalCount,p=void 0===l?0:l,d=i.length,h=m({length:d,totalCount:p}),a((u={list:i,hasMore:h,isFetching:!1},{type:P.a.LOADED,payload:u})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(2),a({type:P.a.FETCH_ERROR}),console.log(t.t0);case 16:case"end":return t.stop()}var u},t,null,[[2,12]])}));return function(e){return t.apply(this,arguments)}}()},M=function(){return{type:P.a.RESET}},R=a(67),T=(a(91),function(e){return e.photos}),S=function(e){return T(e).list},F=function(e){return T(e).hasMore},A=function(e){return T(e).isFetching},G=a(252),L=a(250),J=a.n(L),D=a(88),q=a.n(D),H=function(e){var t=e.children,a=e.colSpan,r=e.rowSpan,o=e.className,c=q()(e,["children","colSpan","rowSpan","className"]),s={};return a&&(s.gridColumn="span "+a+" / auto"),r&&(s.gridRow="span "+r+" / auto"),n.createElement("div",Object.assign({className:J()("tile",o),style:s},c),t)},I=(a(242),function(e){var t=e.gutter,a=e.className,r=e.children,o=n.useRef(null);return n.useEffect(function(){var e=o.current;e&&!a&&t&&e.style.setProperty("--tiles-gutter",t)},[t,a]),n.createElement("div",{ref:o,className:J()("tiles",a)},r)});a(243);!function(e){e.SQUARE="square",e.RECTANGLE="rectangle"}(O||(O={}));var U=function(e){var t=e.url,a=e.type,r=void 0===a?O.RECTANGLE:a,o=e.className,c={className:J()(o,"imagecard","imagecard--"+r),style:{backgroundImage:"url('"+t+"')"}};return n.createElement("div",c)},z=(a(244),function(e){var t=e.data,a=t.url,r=t.title;return n.createElement("div",{className:"photocard"},n.createElement(U,{url:a}),n.createElement("div",{className:"photocard__title"},r))}),B=(a(245),n.memo(function(){var e=Object(s.b)(),t=Object(s.c)(S),a=Object(s.c)(F),r=Object(s.c)(A);n.useEffect(function(){e(C({page:0,countPerPage:18,previousTotalCount:t.length}))},[]);return n.createElement(n.Fragment,null,n.createElement(R.a,{id:"photos.pagetitle",defaultMessage:"Photos"},function(e){return n.createElement(G.a,{title:e})}),n.createElement("div",{className:"photos"},n.createElement(I,{className:"photos__tiles"},t.map(function(e,t){return n.createElement(H,{key:t,onClick:(a=e.id,function(){return Object(c.navigate)("/photos/"+a)})},n.createElement(z,{data:e}));var a})),!r&&a&&n.createElement("div",{className:"photos__hasmore"},n.createElement("button",{onClick:function(){e(C({countPerPage:18,previousTotalCount:t.length}))}},n.createElement(R.a,{id:"photos.loadmore",defaultMessage:"Load more"}))),r&&n.createElement("div",{className:"photos__hasmore"},n.createElement(R.a,{id:"photos.loading",defaultMessage:"Loading..."}))))})),K=(a(246),n.memo(function(e){var t=e.id,a=Object(s.c)(function(e){return function(t){return S(t).find(function(t){return t.id===e})}}(Number(t))),r=a?a.id:"Not Found";return n.createElement(n.Fragment,null,n.createElement(R.a,{id:"photo.pagetitle",defaultMessage:"Photo {id}",values:{id:r}},function(e){return n.createElement(G.a,{title:e})}),n.createElement("div",{className:"photo"},a?n.createElement(z,{data:a}):n.createElement(R.a,{id:"photo.not-found",defaultMessage:"Photo: {id} - Not Found",values:{id:t}}),n.createElement(c.Link,{to:"/photos",className:"photo__link"},n.createElement(R.a,{id:"photo.return-to-photos",defaultMessage:"Return to photos"}))))})),Q=function(){var e=Object(s.b)();return n.useEffect(function(){return function(){e(M())}},[]),n.createElement(c.Router,{basepath:"photos"},n.createElement(B,{path:"/"}),n.createElement(K,{path:":id"}))};t.default=function(){return r.a.createElement(o.a,null,r.a.createElement(Q,null))}},249:function(e,t,a){var n;e.exports=(n=a(254))&&n.default||n},251:function(e,t,a){"use strict";var n=a(0),r=a.n(n),o=a(1),c=a.n(o),s=a(86),i=a.n(s);a.d(t,"a",function(){return i.a});a(249),r.a.createContext({});c.a.object,c.a.string.isRequired,c.a.func,c.a.func},252:function(e,t,a){"use strict";var n=a(255),r=a(0),o=a(257),c=a.n(o),s=function(e){var t=e.description,a=e.lang,o=e.meta,s=e.title,i=n.data.site,u=t||i.siteMetadata.description,l=[{name:"description",content:u},{property:"og:title",content:s},{property:"og:description",content:u},{property:"og:type",content:"website"},{name:"twitter:card",content:"summary"},{name:"twitter:creator",content:i.siteMetadata.author},{name:"twitter:title",content:s},{name:"twitter:description",content:u}];return r.createElement(c.a,{htmlAttributes:{lang:a},title:s,titleTemplate:"%s | "+i.siteMetadata.title,meta:l.concat(o)})};s.defaultProps={lang:"en",meta:[],description:""},t.a=s},253:function(e){e.exports={data:{site:{siteMetadata:{title:"Gatsby TypeScript Application Starter"}}}}},254:function(e,t,a){"use strict";a.r(t);a(17);var n=a(0),r=a.n(n),o=a(1),c=a.n(o),s=a(118),i=function(e){var t=e.location,a=e.pageResources;return a?r.a.createElement(s.a,Object.assign({location:t,pageResources:a},a.json)):null};i.propTypes={location:c.a.shape({pathname:c.a.string.isRequired}).isRequired},t.default=i},255:function(e){e.exports={data:{site:{siteMetadata:{title:"Gatsby TypeScript Application Starter",description:"Kick off your next, great Gatsby typescript application project with this default starter. This barebones starter ships with the main Gatsby configuration files you might need.",author:"@erkobridee"}}}}},256:function(e,t,a){"use strict";var n=a(253),r=a(0),o=a(251),c=(a(229),function(e){var t=e.siteTitle,a=void 0===t?"":t;return r.createElement("div",{className:"layoutheader"},r.createElement("div",{className:"layoutheader__content"},r.createElement("div",{className:"layoutheader__title"},r.createElement(o.a,{to:"/",className:"layoutheader__link"},a))))}),s=a(67),i=(a(17),a(18),a(88)),u=a.n(i),l=a(250),p=a.n(l),d=function(e){var t=e.name,a=e.className,n=u()(e,["name","className"]),o=p()("icon icon-"+t+"_icon",a);return r.createElement("i",Object.assign({className:o},n))},m=(a(16),a(9),a(2),a(26),a(59)),f=a(119),h=a(117),g=(a(230),Object(s.d)({en:{id:"language.selector.option.english",defaultMessage:"English"},es:{id:"language.selector.option.spanish",defaultMessage:"Spanish"},pt:{id:"language.selector.option.portuguese",defaultMessage:"Portuguese"}})),v=Object(s.e)(function(e){var t=e.intl,a=e.className,n=e.label,o=void 0===n?r.createElement(s.a,{id:"language.selector.label",defaultMessage:"Select another available language"}):n,c=Object(m.b)(),i=Object(m.c)(h.b);return r.createElement("div",{className:p()("languageselector",a)},o&&r.createElement("div",{className:"languageselector__label"},o),r.createElement("div",{className:"languageselector__selectcontainer"},r.createElement("select",{value:i,onChange:function(e){c(Object(f.a)(e.target.value))},className:"languageselector__select"},Object.keys(g).map(function(e,a){return r.createElement("option",{key:a,value:e},t.formatMessage(g[e]))}),"}")))}),b=(a(231),function(){return r.createElement("div",{className:"layoutfooter"},r.createElement("div",{className:"layoutfooter__content"},r.createElement("div",null,"Â© ",(new Date).getFullYear(),", ",r.createElement(s.a,{id:"layout.build-with",defaultMessage:"Built with"})," ",r.createElement("a",{href:"https://www.gatsbyjs.org"},"Gatsby ",r.createElement(d,{name:"heart"}))),r.createElement(v,null)))});a(232),t.a=function(e){var t=e.children,a=e.displayFooter,o=void 0===a||a,s=n.data;return r.createElement("div",{className:"layout"},r.createElement(c,{siteTitle:s.site.siteMetadata.title}),r.createElement("div",{className:"layout__content"},t),o&&r.createElement(b,null))}}}]);
//# sourceMappingURL=component---src-pages-photos-tsx-9c597a909998c3fcce1f.js.map